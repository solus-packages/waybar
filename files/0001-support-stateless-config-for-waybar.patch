From 448e1f5b75b0fb6eaad1d9630eba98ab0eb1007e Mon Sep 17 00:00:00 2001
From: Matt Kastelic <edenfall_matt@hotmail.com>
Date: Mon, 6 Sep 2021 11:50:10 -0400
Subject: [PATCH] Revised meson.build and src/client.app to support stateless
 config

---
 meson.build    | 2 +-
 src/client.cpp | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/meson.build b/meson.build
index 835b70e..363afae 100644
--- a/meson.build
+++ b/meson.build
@@ -290,7 +290,7 @@ executable(
 install_data(
     './resources/config',
     './resources/style.css',
-    install_dir: sysconfdir + '/xdg/waybar'
+    install_dir: '/usr/share/defaults/waybar'
 )
 
 scdoc = dependency('scdoc', version: '>=1.9.2', native: true, required: get_option('man-pages'))
diff --git a/src/client.cpp b/src/client.cpp
index ff6e7bf..c393ca0 100644
--- a/src/client.cpp
+++ b/src/client.cpp
@@ -216,6 +216,7 @@ std::tuple<const std::string, const std::string> waybar::Client::getConfigs(
                                           "/etc/xdg/waybar/config.jsonc",
                                           SYSCONFDIR "/xdg/waybar/config",
                                           "./resources/config",
+                                          "/usr/share/defaults/waybar/config",
                                       })
                                     : config;
   auto css_file = style.empty() ? getValidPath({
@@ -225,6 +226,7 @@ std::tuple<const std::string, const std::string> waybar::Client::getConfigs(
                                       "/etc/xdg/waybar/style.css",
                                       SYSCONFDIR "/xdg/waybar/style.css",
                                       "./resources/style.css",
+                                     "/usr/share/defaults/waybar/style.css",
                                   })
                                 : style;
   if (css_file.empty() || config_file.empty()) {
-- 
2.32.0

